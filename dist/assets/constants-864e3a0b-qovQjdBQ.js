import{b as s,p as m,D as l,A as k,q as R,s as _,t as F,u as z,v as H,w as O,f as o,x as p,C as u,a as f}from"./index-DaQaGRbi.js";/*!
 * Built with Stencil
 * Copyright (c) 2023 Facephi Biometria, S.A.
 */const D="selphid";let i=null,d=null,c=!1;const r={iqaOverExposureThHigh:O,iqaUnderExposureThHigh:H,iqaSharpnessThLow:z,iqaReadabilityThLow:F};function B(){if(!i){const e={scanMode:s.countryFilter?"Search":"Generic",documentType:s.documentType.includes(l.Autodetect)?l[0]:s.documentType.map(n=>l[n]).join(","),documentSide:s.expectedSides===m.Auto?"Front/Back":"Front",wizardMode:s.expectedSides===m.Auto};s.countryFilter&&(e.scanParam=s.countryFilter.join(",")),i=new k,i.initialize(D,R.SelphidExecutionCompleted,_,r,e)}}async function C(){try{return i?(c&&h(),await i.getBuffer(s.debug)):void 0}catch(e){throw new Error(`Advanced tracking buffer could not be generated. ${e}`)}}function A(e){i&&e!==d&&(d!==null&&h(),d=e,c=!0,i.addEvent(o.beginPhaseData,Date.now(),{name:e}))}function h(){i&&(c=!1,i.addEvent(o.endPhaseData,Date.now(),{name:d}))}function L(e,n,a){if(i&&(d===p.CaptureFront||d===p.CaptureBack)){const t={diagnostic:a.iqaParameters.diagnostic,ocrFields:a.iqaParameters.ocrFields,imgFields:a.iqaParameters.imgFields};if(a.isDocumentDetected)for(const[P,g]of Object.entries(a.iqaParameters))g!==void 0&&(t[P]=g);(a.iqaParameters.iqaOverExposure!==void 0||a.iqaParameters.iqaOverExposure!==null)&&(t.iqaOverExposureInRange=a.iqaParameters.iqaOverExposure<r.iqaOverExposureThHigh),(a.iqaParameters.iqaUnderExposure!==void 0||a.iqaParameters.iqaUnderExposure!==null)&&(t.iqaUnderExposureInRange=a.iqaParameters.iqaUnderExposure<r.iqaUnderExposureThHigh),(a.iqaParameters.iqaSharpness!==void 0||a.iqaParameters.iqaSharpness!==null)&&(t.iqaSharpnessInRange=a.iqaParameters.iqaSharpness>r.iqaSharpnessThLow),(a.iqaParameters.iqaReadability!==void 0||a.iqaParameters.iqaReadability!==null)&&(t.iqaReadabilityInRange=a.iqaParameters.iqaReadability>r.iqaReadabilityThLow),i.addEvent(o.documentFrameCapturedData,e,t,n)}}function M(e,n,a){i&&(i.addEvent(e,n,{element:a}),c&&(a===u.buttonContinue||a===u.buttonRetry||a===u.buttonErrorRepeat||a===u.buttonCloseTutorial)&&(h(),d=null))}function U(e,n){i&&i.addEvent(o.errorData,Date.now(),{errorType:e,message:n})}function j(e,n,a){if(i){let t="";e?n.iqaOverExposure>r.iqaOverExposureThHigh||n.iqaUnderExposure>r.iqaUnderExposureThHigh?t=`The maximum waiting time has been exceeded. It seems that the ${f[a]} of the document is not as expected or there are glare or shadows that make it difficult to classify.`:(n.iqaSharpness<r.iqaSharpnessThLow||n.iqaReadability<r.iqaReadabilityThLow)&&(t=`The maximum waiting time has been exceeded. The ${f[a]} of the document could not be read successfully. Make sure that the image is sharp and that the data on the document is clearly readable.`):t=`The maximum waiting time has been exceeded. The ${f[a]} of the document has not been detected.`,i.addEvent(o.timeoutData,Date.now(),{message:t})}}function Q(){i&&(i.finalize(),i=null,d=null,c=!1)}var v;(function(e){e.Microblink="Microblink",e.FacephiDocumentReader="FacephiDocumentReader"})(v||(v={}));var q;(function(e){e.Full="full",e.CurrentSide="currentSide"})(q||(q={}));var x;(function(e){e.initializing="initializing",e.initEngine="initEngine",e.ready="ready",e.analyzing="analyzing",e.previewImage="previewImage",e.resetting="resetting",e.finish="finish",e.error="error",e.end="end"})(x||(x={}));var y;(function(e){e.engineConfiguration="engineConfiguration",e.analyzeImage="analyzeImage",e.preview="preview",e.resetEngine="resetEngine",e.timeout="timeout",e.finishProcess="finishProcess",e.reinitialize="reinitialize",e.setNewDpi="setNewDpi"})(y||(y={}));const $="timeout";var E;(function(e){e[e.Ok=0]="Ok",e[e.Bad_Angle=2]="Bad_Angle",e[e.Too_Far=3]="Too_Far",e[e.Too_Close=4]="Too_Close",e[e.Out_Of_Bounds=5]="Out_Of_Bounds"})(E||(E={}));var b;(function(e){e[e.Failed=-1]="Failed",e[e.Success=0]="Success"})(b||(b={}));var w;(function(e){e.Success="Success",e.KeepEngineAlive="KeepEngineAlive",e.Error="Error",e.TokenizerFailure="TokenizerFailure",e.Cancel="Cancel"})(w||(w={}));export{E as D,w as E,b as F,q as R,x as S,$ as T,M as a,A as b,y as c,j as d,L as e,v as f,C as g,Q as h,B as i,U as j};
