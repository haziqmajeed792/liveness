import{r as i,b as t,h as o,i as s,j as c}from"./index-jk1bhg_G.js";import{s as a}from"./video-features-bd0e294f-Cb-Gae0p.js";import"./index-CnKKXoxi.js";/*!
 * Built with Stencil
 * Copyright (c) 2023 Facephi Biometria, S.A.
 */const n=":host{--cameraMirror:1}.document__container{position:relative;background-color:var(--color-background-camera);border-radius:var(--border-radius);max-height:100%;margin:0 auto}.document-background-overflown{background-color:unset}.document{width:100%;height:100%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);border-style:solid;border-radius:var(--border-radius);border-width:var(--document-border-width);border-color:var(--color-primary);z-index:1;box-sizing:content-box}.document.okColor{border-color:var(--color-capture-success)}.document.failColor{border-color:var(--color-capture-fail)}.document.failAttempt{background-color:rgba(69, 12, 12, 0.5019607843)}.camera-overflow{display:none;box-sizing:content-box;border:solid 100vw var(--color-background);filter:drop-shadow(2px 2px 2px var(--color-camera-overflow-filter));height:100%;width:100%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%)}.camera-overflow.is-overflown{display:block;border:solid 100vw var(--color-camera-overflow)}.video{display:block;width:100%;height:100%;object-fit:cover;position:absolute;transform:scaleX(var(--cameraMirror));-webkit-transform:scaleX(var(--cameraMirror))}.hide-video{display:none}",d=n,l=class{constructor(e){i(this,e),this.videoStream=void 0,this.aspectRatio="85.6 / 53.98",this.cameraMirror=void 0,this.failedAttemptCounter=0,this.imageToPreview=null,this.timeToDisplay=1500}handleSwitchVideoStream(e,r){e!==r&&!t.cameraOverflow&&a(e,r,this.videoElement)}watchFailedAttemptCounter(){this.failedAttemptCounter&&(this.documentElement.classList.add("failColor"),this.documentElement.classList.add("failAttempt"),setTimeout(()=>{this.documentElement.classList.remove("failColor"),this.documentElement.classList.remove("failAttempt")},this.timeToDisplay))}handleImageToPreview(){this.imageToPreview!==null&&(this.documentContainer.appendChild(this.imageToPreview),this.videoElement.classList.add("hide-video"),this.documentElement.classList.add("okColor"),this.documentElement.classList.remove("failColor"),this.documentElement.classList.remove("failAttempt"),setTimeout(()=>{this.documentElement.classList.remove("okColor"),this.videoElement.classList.remove("hide-video");const e=this.documentContainer.lastChild;this.documentContainer.removeChild(e)},this.timeToDisplay))}componentDidLoad(){this.documentContainer=this.cameraComponent.querySelector(".document__container"),this.documentElement=this.cameraComponent.querySelector(".document"),this.videoElement=this.cameraComponent.querySelector(".video"),t.cameraOverflow||a(this.videoStream,void 0,this.videoElement)}render(){return o("div",{key:"bce8211dd3cabf74f6812393cd8d396dff63b81b",class:`document__container ${t.cameraOverflow&&"document-background-overflown"}`,style:{aspectRatio:this.aspectRatio}},o("slot",{key:"db2fec82ce676a5e6c66d845db4eb254387b88ab",name:"diagnostic"}),o("div",{key:"43d8b04420c782a68dc42b6a8cd6931cfb611ca0",class:"document"}),o("div",{key:"e143f0706e14b16f454862497a745ce0e3824832",class:`camera-overflow ${t.cameraOverflow&&"is-overflown"}`,style:{aspectRatio:this.aspectRatio}}),o("video",{key:"48f651fb32d5732dc461102e84ec0273a0162c89",class:`video ${t.cameraOverflow&&"hide-video"}`,style:{aspectRatio:this.aspectRatio,transform:`scaleX(${this.cameraMirror===s.User?-1:1})`},playsinline:!0,muted:!0,controls:!1}))}get cameraComponent(){return c(this)}static get watchers(){return{videoStream:["handleSwitchVideoStream"],failedAttemptCounter:["watchFailedAttemptCounter"],imageToPreview:["handleImageToPreview"]}}};l.style=d;export{l as selphid_camera};
